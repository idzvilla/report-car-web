{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction NavbarComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 9);\n    i0.ɵɵtext(2, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 10);\n    i0.ɵɵtext(4, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction NavbarComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"span\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 12);\n    i0.ɵɵtext(4, \" \\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 13);\n    i0.ɵɵtext(6, \" \\u0410\\u0434\\u043C\\u0438\\u043D \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function NavbarComponent_ng_template_9_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵtext(8, \" \\u0412\\u044B\\u0439\\u0442\\u0438 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", (ctx_r1.currentUser == null ? null : ctx_r1.currentUser.fullName) || (ctx_r1.currentUser == null ? null : ctx_r1.currentUser.email), \"! \");\n  }\n}\nexport class NavbarComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.currentUser = null;\n    this.isAuthenticated = false;\n  }\n  ngOnInit() {\n    this.authService.currentUser$.subscribe(user => {\n      this.currentUser = user;\n      this.isAuthenticated = !!user;\n    });\n  }\n  logout() {\n    this.authService.logout().subscribe({\n      next: () => {\n        this.router.navigate(['/']);\n      },\n      error: error => {\n        console.error('Ошибка выхода:', error);\n        // Всё равно перенаправляем на главную\n        this.router.navigate(['/']);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function NavbarComponent_Factory(t) {\n      return new (t || NavbarComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: NavbarComponent,\n      selectors: [[\"app-navbar\"]],\n      decls: 11,\n      vars: 2,\n      consts: [[\"authenticatedMenu\", \"\"], [1, \"bg-white\", \"border-b\", \"border-gray-200\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [1, \"flex\", \"justify-between\", \"items-center\", \"h-16\"], [1, \"flex\", \"items-center\"], [\"routerLink\", \"/\", 1, \"flex-shrink-0\", \"flex\", \"items-center\"], [1, \"text-2xl\", \"font-bold\", \"text-gray-900\"], [1, \"flex\", \"items-center\", \"space-x-4\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"btn\", \"btn-outline\"], [1, \"btn\", \"btn-primary\"], [1, \"text-sm\", \"text-gray-700\"], [\"routerLink\", \"/profile\", 1, \"btn\", \"btn-outline\", \"btn-sm\"], [\"routerLink\", \"/admin\", 1, \"btn\", \"btn-outline\", \"btn-sm\"], [1, \"btn\", \"btn-outline\", \"btn-sm\", 3, \"click\"]],\n      template: function NavbarComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"div\", 4)(4, \"a\", 5)(5, \"h1\", 6);\n          i0.ɵɵtext(6, \"CarFax Web\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 7);\n          i0.ɵɵtemplate(8, NavbarComponent_ng_container_8_Template, 5, 0, \"ng-container\", 8)(9, NavbarComponent_ng_template_9_Template, 9, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          const authenticatedMenu_r3 = i0.ɵɵreference(10);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated)(\"ngIfElse\", authenticatedMenu_r3);\n        }\n      },\n      dependencies: [i3.NgIf, i2.RouterLink],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementContainerStart","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","NavbarComponent_ng_template_9_Template_button_click_7_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","logout","ɵɵadvance","ɵɵtextInterpolate1","currentUser","fullName","email","NavbarComponent","constructor","authService","router","isAuthenticated","ngOnInit","currentUser$","subscribe","user","next","navigate","error","console","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","decls","vars","consts","template","NavbarComponent_Template","rf","ctx","ɵɵtemplate","NavbarComponent_ng_container_8_Template","NavbarComponent_ng_template_9_Template","ɵɵtemplateRefExtractor","ɵɵproperty","authenticatedMenu_r3"],"sources":["/Users/test/Documents/Apps/CarFax Web/frontend/src/app/components/navbar/navbar.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService, User } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-navbar',\n  template: `\n    <nav class=\"bg-white border-b border-gray-200\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center h-16\">\n          <div class=\"flex items-center\">\n            <a routerLink=\"/\" class=\"flex-shrink-0 flex items-center\">\n              <h1 class=\"text-2xl font-bold text-gray-900\">CarFax Web</h1>\n            </a>\n          </div>\n          \n          <div class=\"flex items-center space-x-4\">\n            <ng-container *ngIf=\"!isAuthenticated; else authenticatedMenu\">\n              <button class=\"btn btn-outline\">Войти</button>\n              <button class=\"btn btn-primary\">Регистрация</button>\n            </ng-container>\n            \n            <ng-template #authenticatedMenu>\n              <div class=\"flex items-center space-x-4\">\n                <span class=\"text-sm text-gray-700\">\n                  Привет, {{ currentUser?.fullName || currentUser?.email }}!\n                </span>\n                <a routerLink=\"/profile\" class=\"btn btn-outline btn-sm\">\n                  Профиль\n                </a>\n                <a routerLink=\"/admin\" class=\"btn btn-outline btn-sm\">\n                  Админ\n                </a>\n                <button (click)=\"logout()\" class=\"btn btn-outline btn-sm\">\n                  Выйти\n                </button>\n              </div>\n            </ng-template>\n          </div>\n        </div>\n      </div>\n    </nav>\n  `,\n  styles: []\n})\nexport class NavbarComponent implements OnInit {\n  currentUser: User | null = null;\n  isAuthenticated = false;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.authService.currentUser$.subscribe(user => {\n      this.currentUser = user;\n      this.isAuthenticated = !!user;\n    });\n  }\n\n  logout(): void {\n    this.authService.logout().subscribe({\n      next: () => {\n        this.router.navigate(['/']);\n      },\n      error: (error) => {\n        console.error('Ошибка выхода:', error);\n        // Всё равно перенаправляем на главную\n        this.router.navigate(['/']);\n      }\n    });\n  }\n}\n"],"mappings":";;;;;;IAiBYA,EAAA,CAAAC,uBAAA,GAA+D;IAC7DD,EAAA,CAAAE,cAAA,gBAAgC;IAAAF,EAAA,CAAAG,MAAA,qCAAK;IAAAH,EAAA,CAAAI,YAAA,EAAS;IAC9CJ,EAAA,CAAAE,cAAA,iBAAgC;IAAAF,EAAA,CAAAG,MAAA,yEAAW;IAAAH,EAAA,CAAAI,YAAA,EAAS;;;;;;;IAKlDJ,EADF,CAAAE,cAAA,aAAyC,eACH;IAClCF,EAAA,CAAAG,MAAA,GACF;IAAAH,EAAA,CAAAI,YAAA,EAAO;IACPJ,EAAA,CAAAE,cAAA,YAAwD;IACtDF,EAAA,CAAAG,MAAA,mDACF;IAAAH,EAAA,CAAAI,YAAA,EAAI;IACJJ,EAAA,CAAAE,cAAA,YAAsD;IACpDF,EAAA,CAAAG,MAAA,uCACF;IAAAH,EAAA,CAAAI,YAAA,EAAI;IACJJ,EAAA,CAAAE,cAAA,iBAA0D;IAAlDF,EAAA,CAAAK,UAAA,mBAAAC,+DAAA;MAAAN,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAT,EAAA,CAAAU,aAAA;MAAA,OAAAV,EAAA,CAAAW,WAAA,CAASF,MAAA,CAAAG,MAAA,EAAQ;IAAA,EAAC;IACxBZ,EAAA,CAAAG,MAAA,uCACF;IACFH,EADE,CAAAI,YAAA,EAAS,EACL;;;;IAXFJ,EAAA,CAAAa,SAAA,GACF;IADEb,EAAA,CAAAc,kBAAA,6CAAAL,MAAA,CAAAM,WAAA,kBAAAN,MAAA,CAAAM,WAAA,CAAAC,QAAA,MAAAP,MAAA,CAAAM,WAAA,kBAAAN,MAAA,CAAAM,WAAA,CAAAE,KAAA,QACF;;;AAmBhB,OAAM,MAAOC,eAAe;EAI1BC,YACUC,WAAwB,EACxBC,MAAc;IADd,KAAAD,WAAW,GAAXA,WAAW;IACX,KAAAC,MAAM,GAANA,MAAM;IALhB,KAAAN,WAAW,GAAgB,IAAI;IAC/B,KAAAO,eAAe,GAAG,KAAK;EAKpB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACH,WAAW,CAACI,YAAY,CAACC,SAAS,CAACC,IAAI,IAAG;MAC7C,IAAI,CAACX,WAAW,GAAGW,IAAI;MACvB,IAAI,CAACJ,eAAe,GAAG,CAAC,CAACI,IAAI;IAC/B,CAAC,CAAC;EACJ;EAEAd,MAAMA,CAAA;IACJ,IAAI,CAACQ,WAAW,CAACR,MAAM,EAAE,CAACa,SAAS,CAAC;MAClCE,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACN,MAAM,CAACO,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;MAC7B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;QACtC;QACA,IAAI,CAACR,MAAM,CAACO,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;MAC7B;KACD,CAAC;EACJ;;;uBA3BWV,eAAe,EAAAlB,EAAA,CAAA+B,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAjC,EAAA,CAAA+B,iBAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;EAAA;;;YAAfjB,eAAe;MAAAkB,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,yBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UAjCd1C,EALV,CAAAE,cAAA,aAA+C,aACO,aACE,aACnB,WAC6B,YACX;UAAAF,EAAA,CAAAG,MAAA,iBAAU;UAE3DH,EAF2D,CAAAI,YAAA,EAAK,EAC1D,EACA;UAENJ,EAAA,CAAAE,cAAA,aAAyC;UAMvCF,EALA,CAAA4C,UAAA,IAAAC,uCAAA,0BAA+D,IAAAC,sCAAA,gCAAA9C,EAAA,CAAA+C,sBAAA,CAK/B;UAmBxC/C,EAHM,CAAAI,YAAA,EAAM,EACF,EACF,EACF;;;;UAxBiBJ,EAAA,CAAAa,SAAA,GAAwB;UAAAb,EAAxB,CAAAgD,UAAA,UAAAL,GAAA,CAAArB,eAAA,CAAwB,aAAA2B,oBAAA,CAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}