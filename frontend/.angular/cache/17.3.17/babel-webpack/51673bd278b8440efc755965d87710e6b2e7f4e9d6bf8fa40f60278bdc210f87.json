{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/forms\";\nfunction ProfileComponent_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵelement(1, \"app-loading-spinner\");\n    i0.ɵɵelementStart(2, \"span\", 30);\n    i0.ɵɵtext(3, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProfileComponent_span_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_span_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵelement(1, \"app-loading-spinner\");\n    i0.ɵɵelementStart(2, \"span\", 30);\n    i0.ɵɵtext(3, \"\\u0421\\u043C\\u0435\\u043D\\u0430...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProfileComponent_div_64_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.messageType === \"success\" ? \"bg-green-50 text-green-700\" : \"bg-red-50 text-red-700\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.message, \" \");\n  }\n}\nexport class ProfileComponent {\n  constructor(authService, fb) {\n    this.authService = authService;\n    this.fb = fb;\n    this.user = null;\n    this.isUpdating = false;\n    this.isUpdatingEmail = false;\n    this.message = '';\n    this.messageType = 'success';\n    this.profileForm = this.fb.group({\n      email: [''],\n      fullName: ['', [Validators.required, Validators.minLength(2)]]\n    });\n    this.emailForm = this.fb.group({\n      newEmail: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required]]\n    });\n  }\n  ngOnInit() {\n    this.authService.currentUser$.subscribe(user => {\n      this.user = user;\n      if (user) {\n        this.profileForm.patchValue({\n          email: user.email,\n          fullName: user.fullName\n        });\n      }\n    });\n  }\n  onUpdateProfile() {\n    if (this.profileForm.valid) {\n      this.isUpdating = true;\n      this.message = '';\n      // В реальном приложении здесь бы был API вызов для обновления профиля\n      setTimeout(() => {\n        this.isUpdating = false;\n        this.message = 'Профиль успешно обновлен';\n        this.messageType = 'success';\n      }, 1000);\n    }\n  }\n  onUpdateEmail() {\n    if (this.emailForm.valid && this.user) {\n      this.isUpdatingEmail = true;\n      this.message = '';\n      const {\n        newEmail,\n        password\n      } = this.emailForm.value;\n      this.authService.updateEmail(newEmail, password).subscribe({\n        next: () => {\n          this.isUpdatingEmail = false;\n          this.message = 'Email успешно обновлен';\n          this.messageType = 'success';\n          this.emailForm.reset();\n        },\n        error: error => {\n          this.isUpdatingEmail = false;\n          this.message = 'Ошибка обновления email. Проверьте пароль.';\n          this.messageType = 'error';\n          console.error('Update email error:', error);\n        }\n      });\n    }\n  }\n  static {\n    this.ɵfac = function ProfileComponent_Factory(t) {\n      return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfileComponent,\n      selectors: [[\"app-profile\"]],\n      decls: 65,\n      vars: 15,\n      consts: [[1, \"min-h-screen\", \"bg-gray-50\", \"py-12\"], [1, \"max-w-4xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [1, \"bg-white\", \"shadow\", \"rounded-lg\"], [1, \"px-4\", \"py-5\", \"sm:p-6\"], [1, \"text-2xl\", \"font-bold\", \"text-gray-900\", \"mb-8\"], [1, \"grid\", \"md:grid-cols-2\", \"gap-8\"], [1, \"text-lg\", \"font-medium\", \"text-gray-900\", \"mb-4\"], [1, \"space-y-4\", 3, \"ngSubmit\", \"formGroup\"], [1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"type\", \"email\", \"formControlName\", \"email\", \"readonly\", \"\", 1, \"mt-1\", \"input-field\"], [\"type\", \"text\", \"formControlName\", \"fullName\", 1, \"mt-1\", \"input-field\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"mt-1\", \"input-field\", 3, \"value\"], [\"type\", \"submit\", 1, \"btn-primary\", \"disabled:opacity-50\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"flex items-center\", 4, \"ngIf\"], [1, \"bg-primary-50\", \"rounded-lg\", \"p-4\", \"mb-4\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"text-sm\", \"font-medium\", \"text-primary-700\"], [1, \"text-2xl\", \"font-bold\", \"text-primary-600\"], [1, \"mt-2\", \"text-sm\", \"text-primary-600\"], [1, \"text-sm\", \"text-gray-600\"], [1, \"mb-2\"], [1, \"list-disc\", \"list-inside\", \"space-y-1\"], [1, \"mt-8\", \"pt-8\", \"border-t\", \"border-gray-200\"], [1, \"max-w-md\", 3, \"ngSubmit\", \"formGroup\"], [1, \"space-y-4\"], [\"type\", \"email\", \"formControlName\", \"newEmail\", \"placeholder\", \"new@email.com\", 1, \"mt-1\", \"input-field\"], [\"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\", 1, \"mt-1\", \"input-field\"], [\"class\", \"mt-4 p-4 rounded-md\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"flex\", \"items-center\"], [1, \"ml-2\"], [1, \"mt-4\", \"p-4\", \"rounded-md\", 3, \"ngClass\"]],\n      template: function ProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n          i0.ɵɵtext(5, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\")(8, \"h2\", 6);\n          i0.ɵɵtext(9, \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"form\", 7);\n          i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_Template_form_ngSubmit_10_listener() {\n            return ctx.onUpdateProfile();\n          });\n          i0.ɵɵelementStart(11, \"div\")(12, \"label\", 8);\n          i0.ɵɵtext(13, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(14, \"input\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\")(16, \"label\", 8);\n          i0.ɵɵtext(17, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\")(20, \"label\", 8);\n          i0.ɵɵtext(21, \"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"input\", 11);\n          i0.ɵɵpipe(23, \"date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"button\", 12);\n          i0.ɵɵtemplate(25, ProfileComponent_span_25_Template, 2, 0, \"span\", 13)(26, ProfileComponent_span_26_Template, 4, 0, \"span\", 14);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(27, \"div\")(28, \"h2\", 6);\n          i0.ɵɵtext(29, \"Credits\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 15)(31, \"div\", 16)(32, \"span\", 17);\n          i0.ɵɵtext(33, \"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C credits:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"span\", 18);\n          i0.ɵɵtext(35);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"div\", 19);\n          i0.ɵɵtext(37);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(38, \"div\", 20)(39, \"p\", 21);\n          i0.ɵɵtext(40, \"Credits \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u044E\\u0442\\u0441\\u044F \\u0434\\u043B\\u044F \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u044F \\u043E\\u0442\\u0447\\u0451\\u0442\\u043E\\u0432 \\u043F\\u043E VIN:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"ul\", 22)(42, \"li\");\n          i0.ɵɵtext(43, \"1 credit = 1 \\u043E\\u0442\\u0447\\u0451\\u0442\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"li\");\n          i0.ɵɵtext(45, \"Bulk \\u043F\\u0430\\u043A\\u0435\\u0442: 100 credits \\u0437\\u0430 $99\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"li\");\n          i0.ɵɵtext(47, \"Single \\u043E\\u0442\\u0447\\u0451\\u0442: $2 (\\u0431\\u0435\\u0437 \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F credits)\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(48, \"div\", 23)(49, \"h2\", 6);\n          i0.ɵɵtext(50, \"\\u0421\\u043C\\u0435\\u043D\\u0430 email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(51, \"form\", 24);\n          i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_Template_form_ngSubmit_51_listener() {\n            return ctx.onUpdateEmail();\n          });\n          i0.ɵɵelementStart(52, \"div\", 25)(53, \"div\")(54, \"label\", 8);\n          i0.ɵɵtext(55, \"\\u041D\\u043E\\u0432\\u044B\\u0439 email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(56, \"input\", 26);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"div\")(58, \"label\", 8);\n          i0.ɵɵtext(59, \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(60, \"input\", 27);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"button\", 12);\n          i0.ɵɵtemplate(62, ProfileComponent_span_62_Template, 2, 0, \"span\", 13)(63, ProfileComponent_span_63_Template, 4, 0, \"span\", 14);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(64, ProfileComponent_div_64_Template, 2, 2, \"div\", 28);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"formGroup\", ctx.profileForm);\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind2(23, 12, ctx.user == null ? null : ctx.user.createdAt, \"dd.MM.yyyy HH:mm\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.profileForm.invalid || ctx.isUpdating);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isUpdating);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isUpdating);\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\" \", (ctx.user == null ? null : ctx.user.credits == null ? null : ctx.user.credits.credits_remaining) || 0, \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \\u0412\\u0441\\u0435\\u0433\\u043E \\u043A\\u0443\\u043F\\u043B\\u0435\\u043D\\u043E: \", (ctx.user == null ? null : ctx.user.credits == null ? null : ctx.user.credits.credits_total) || 0, \" \");\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"formGroup\", ctx.emailForm);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"disabled\", ctx.emailForm.invalid || ctx.isUpdatingEmail);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isUpdatingEmail);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isUpdatingEmail);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.message);\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵproperty","ctx_r0","messageType","ɵɵadvance","ɵɵtextInterpolate1","message","ProfileComponent","constructor","authService","fb","user","isUpdating","isUpdatingEmail","profileForm","group","email","fullName","required","minLength","emailForm","newEmail","password","ngOnInit","currentUser$","subscribe","patchValue","onUpdateProfile","valid","setTimeout","onUpdateEmail","value","updateEmail","next","reset","error","console","ɵɵdirectiveInject","i1","AuthService","i2","FormBuilder","selectors","decls","vars","consts","template","ProfileComponent_Template","rf","ctx","ɵɵlistener","ProfileComponent_Template_form_ngSubmit_10_listener","ɵɵtemplate","ProfileComponent_span_25_Template","ProfileComponent_span_26_Template","ProfileComponent_Template_form_ngSubmit_51_listener","ProfileComponent_span_62_Template","ProfileComponent_span_63_Template","ProfileComponent_div_64_Template","ɵɵpipeBind2","createdAt","invalid","credits","credits_remaining","credits_total"],"sources":["/Users/test/Documents/Apps/CarFax Web/frontend/src/app/pages/profile/profile.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AuthService, User } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-profile',\n  template: `\n    <div class=\"min-h-screen bg-gray-50 py-12\">\n      <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"bg-white shadow rounded-lg\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <h1 class=\"text-2xl font-bold text-gray-900 mb-8\">Профиль пользователя</h1>\n            \n            <div class=\"grid md:grid-cols-2 gap-8\">\n              <!-- User Info -->\n              <div>\n                <h2 class=\"text-lg font-medium text-gray-900 mb-4\">Информация о пользователе</h2>\n                <form [formGroup]=\"profileForm\" (ngSubmit)=\"onUpdateProfile()\" class=\"space-y-4\">\n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700\">Email</label>\n                    <input\n                      type=\"email\"\n                      formControlName=\"email\"\n                      class=\"mt-1 input-field\"\n                      readonly\n                    />\n                  </div>\n                  \n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700\">Полное имя</label>\n                    <input\n                      type=\"text\"\n                      formControlName=\"fullName\"\n                      class=\"mt-1 input-field\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700\">Дата регистрации</label>\n                    <input\n                      type=\"text\"\n                      [value]=\"user?.createdAt | date:'dd.MM.yyyy HH:mm'\"\n                      class=\"mt-1 input-field\"\n                      readonly\n                    />\n                  </div>\n                  \n                  <button\n                    type=\"submit\"\n                    [disabled]=\"profileForm.invalid || isUpdating\"\n                    class=\"btn-primary disabled:opacity-50\"\n                  >\n                    <span *ngIf=\"!isUpdating\">Обновить профиль</span>\n                    <span *ngIf=\"isUpdating\" class=\"flex items-center\">\n                      <app-loading-spinner></app-loading-spinner>\n                      <span class=\"ml-2\">Обновление...</span>\n                    </span>\n                  </button>\n                </form>\n              </div>\n              \n              <!-- Credits Info -->\n              <div>\n                <h2 class=\"text-lg font-medium text-gray-900 mb-4\">Credits</h2>\n                <div class=\"bg-primary-50 rounded-lg p-4 mb-4\">\n                  <div class=\"flex items-center justify-between\">\n                    <span class=\"text-sm font-medium text-primary-700\">Осталось credits:</span>\n                    <span class=\"text-2xl font-bold text-primary-600\">\n                      {{ user?.credits?.credits_remaining || 0 }}\n                    </span>\n                  </div>\n                  <div class=\"mt-2 text-sm text-primary-600\">\n                    Всего куплено: {{ user?.credits?.credits_total || 0 }}\n                  </div>\n                </div>\n                \n                <div class=\"text-sm text-gray-600\">\n                  <p class=\"mb-2\">Credits используются для получения отчётов по VIN:</p>\n                  <ul class=\"list-disc list-inside space-y-1\">\n                    <li>1 credit = 1 отчёт</li>\n                    <li>Bulk пакет: 100 credits за $99</li>\n                    <li>Single отчёт: $2 (без использования credits)</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            \n            <!-- Change Email Section -->\n            <div class=\"mt-8 pt-8 border-t border-gray-200\">\n              <h2 class=\"text-lg font-medium text-gray-900 mb-4\">Смена email</h2>\n              <form [formGroup]=\"emailForm\" (ngSubmit)=\"onUpdateEmail()\" class=\"max-w-md\">\n                <div class=\"space-y-4\">\n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700\">Новый email</label>\n                    <input\n                      type=\"email\"\n                      formControlName=\"newEmail\"\n                      class=\"mt-1 input-field\"\n                      placeholder=\"new@email.com\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700\">Текущий пароль</label>\n                    <input\n                      type=\"password\"\n                      formControlName=\"password\"\n                      class=\"mt-1 input-field\"\n                      placeholder=\"Введите пароль для подтверждения\"\n                    />\n                  </div>\n                  \n                  <button\n                    type=\"submit\"\n                    [disabled]=\"emailForm.invalid || isUpdatingEmail\"\n                    class=\"btn-primary disabled:opacity-50\"\n                  >\n                    <span *ngIf=\"!isUpdatingEmail\">Сменить email</span>\n                    <span *ngIf=\"isUpdatingEmail\" class=\"flex items-center\">\n                      <app-loading-spinner></app-loading-spinner>\n                      <span class=\"ml-2\">Смена...</span>\n                    </span>\n                  </button>\n                </div>\n              </form>\n            </div>\n            \n            <!-- Messages -->\n            <div *ngIf=\"message\" class=\"mt-4 p-4 rounded-md\" \n                 [ngClass]=\"messageType === 'success' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'\">\n              {{ message }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: []\n})\nexport class ProfileComponent implements OnInit {\n  user: User | null = null;\n  profileForm: FormGroup;\n  emailForm: FormGroup;\n  isUpdating = false;\n  isUpdatingEmail = false;\n  message = '';\n  messageType: 'success' | 'error' = 'success';\n\n  constructor(\n    private authService: AuthService,\n    private fb: FormBuilder\n  ) {\n    this.profileForm = this.fb.group({\n      email: [''],\n      fullName: ['', [Validators.required, Validators.minLength(2)]]\n    });\n    \n    this.emailForm = this.fb.group({\n      newEmail: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required]]\n    });\n  }\n\n  ngOnInit(): void {\n    this.authService.currentUser$.subscribe(user => {\n      this.user = user;\n      if (user) {\n        this.profileForm.patchValue({\n          email: user.email,\n          fullName: user.fullName\n        });\n      }\n    });\n  }\n\n  onUpdateProfile(): void {\n    if (this.profileForm.valid) {\n      this.isUpdating = true;\n      this.message = '';\n      \n      // В реальном приложении здесь бы был API вызов для обновления профиля\n      setTimeout(() => {\n        this.isUpdating = false;\n        this.message = 'Профиль успешно обновлен';\n        this.messageType = 'success';\n      }, 1000);\n    }\n  }\n\n  onUpdateEmail(): void {\n    if (this.emailForm.valid && this.user) {\n      this.isUpdatingEmail = true;\n      this.message = '';\n      \n      const { newEmail, password } = this.emailForm.value;\n      \n      this.authService.updateEmail(newEmail, password).subscribe({\n        next: () => {\n          this.isUpdatingEmail = false;\n          this.message = 'Email успешно обновлен';\n          this.messageType = 'success';\n          this.emailForm.reset();\n        },\n        error: (error) => {\n          this.isUpdatingEmail = false;\n          this.message = 'Ошибка обновления email. Проверьте пароль.';\n          this.messageType = 'error';\n          console.error('Update email error:', error);\n        }\n      });\n    }\n  }\n}\n"],"mappings":"AACA,SAAiCA,UAAU,QAAQ,gBAAgB;;;;;;IAmD/CC,EAAA,CAAAC,cAAA,WAA0B;IAAAD,EAAA,CAAAE,MAAA,kGAAgB;IAAAF,EAAA,CAAAG,YAAA,EAAO;;;;;IACjDH,EAAA,CAAAC,cAAA,eAAmD;IACjDD,EAAA,CAAAI,SAAA,0BAA2C;IAC3CJ,EAAA,CAAAC,cAAA,eAAmB;IAAAD,EAAA,CAAAE,MAAA,sEAAa;IAClCF,EADkC,CAAAG,YAAA,EAAO,EAClC;;;;;IA6DPH,EAAA,CAAAC,cAAA,WAA+B;IAAAD,EAAA,CAAAE,MAAA,uDAAa;IAAAF,EAAA,CAAAG,YAAA,EAAO;;;;;IACnDH,EAAA,CAAAC,cAAA,eAAwD;IACtDD,EAAA,CAAAI,SAAA,0BAA2C;IAC3CJ,EAAA,CAAAC,cAAA,eAAmB;IAAAD,EAAA,CAAAE,MAAA,wCAAQ;IAC7BF,EAD6B,CAAAG,YAAA,EAAO,EAC7B;;;;;IAOfH,EAAA,CAAAC,cAAA,cACqG;IACnGD,EAAA,CAAAE,MAAA,GACF;IAAAF,EAAA,CAAAG,YAAA,EAAM;;;;IAFDH,EAAA,CAAAK,UAAA,YAAAC,MAAA,CAAAC,WAAA,yEAA+F;IAClGP,EAAA,CAAAQ,SAAA,EACF;IADER,EAAA,CAAAS,kBAAA,MAAAH,MAAA,CAAAI,OAAA,MACF;;;AAQZ,OAAM,MAAOC,gBAAgB;EAS3BC,YACUC,WAAwB,EACxBC,EAAe;IADf,KAAAD,WAAW,GAAXA,WAAW;IACX,KAAAC,EAAE,GAAFA,EAAE;IAVZ,KAAAC,IAAI,GAAgB,IAAI;IAGxB,KAAAC,UAAU,GAAG,KAAK;IAClB,KAAAC,eAAe,GAAG,KAAK;IACvB,KAAAP,OAAO,GAAG,EAAE;IACZ,KAAAH,WAAW,GAAwB,SAAS;IAM1C,IAAI,CAACW,WAAW,GAAG,IAAI,CAACJ,EAAE,CAACK,KAAK,CAAC;MAC/BC,KAAK,EAAE,CAAC,EAAE,CAAC;MACXC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAACtB,UAAU,CAACuB,QAAQ,EAAEvB,UAAU,CAACwB,SAAS,CAAC,CAAC,CAAC,CAAC;KAC9D,CAAC;IAEF,IAAI,CAACC,SAAS,GAAG,IAAI,CAACV,EAAE,CAACK,KAAK,CAAC;MAC7BM,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC1B,UAAU,CAACuB,QAAQ,EAAEvB,UAAU,CAACqB,KAAK,CAAC,CAAC;MACvDM,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC3B,UAAU,CAACuB,QAAQ,CAAC;KACrC,CAAC;EACJ;EAEAK,QAAQA,CAAA;IACN,IAAI,CAACd,WAAW,CAACe,YAAY,CAACC,SAAS,CAACd,IAAI,IAAG;MAC7C,IAAI,CAACA,IAAI,GAAGA,IAAI;MAChB,IAAIA,IAAI,EAAE;QACR,IAAI,CAACG,WAAW,CAACY,UAAU,CAAC;UAC1BV,KAAK,EAAEL,IAAI,CAACK,KAAK;UACjBC,QAAQ,EAAEN,IAAI,CAACM;SAChB,CAAC;;IAEN,CAAC,CAAC;EACJ;EAEAU,eAAeA,CAAA;IACb,IAAI,IAAI,CAACb,WAAW,CAACc,KAAK,EAAE;MAC1B,IAAI,CAAChB,UAAU,GAAG,IAAI;MACtB,IAAI,CAACN,OAAO,GAAG,EAAE;MAEjB;MACAuB,UAAU,CAAC,MAAK;QACd,IAAI,CAACjB,UAAU,GAAG,KAAK;QACvB,IAAI,CAACN,OAAO,GAAG,0BAA0B;QACzC,IAAI,CAACH,WAAW,GAAG,SAAS;MAC9B,CAAC,EAAE,IAAI,CAAC;;EAEZ;EAEA2B,aAAaA,CAAA;IACX,IAAI,IAAI,CAACV,SAAS,CAACQ,KAAK,IAAI,IAAI,CAACjB,IAAI,EAAE;MACrC,IAAI,CAACE,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACP,OAAO,GAAG,EAAE;MAEjB,MAAM;QAAEe,QAAQ;QAAEC;MAAQ,CAAE,GAAG,IAAI,CAACF,SAAS,CAACW,KAAK;MAEnD,IAAI,CAACtB,WAAW,CAACuB,WAAW,CAACX,QAAQ,EAAEC,QAAQ,CAAC,CAACG,SAAS,CAAC;QACzDQ,IAAI,EAAEA,CAAA,KAAK;UACT,IAAI,CAACpB,eAAe,GAAG,KAAK;UAC5B,IAAI,CAACP,OAAO,GAAG,wBAAwB;UACvC,IAAI,CAACH,WAAW,GAAG,SAAS;UAC5B,IAAI,CAACiB,SAAS,CAACc,KAAK,EAAE;QACxB,CAAC;QACDC,KAAK,EAAGA,KAAK,IAAI;UACf,IAAI,CAACtB,eAAe,GAAG,KAAK;UAC5B,IAAI,CAACP,OAAO,GAAG,4CAA4C;UAC3D,IAAI,CAACH,WAAW,GAAG,OAAO;UAC1BiC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC7C;OACD,CAAC;;EAEN;;;uBAxEW5B,gBAAgB,EAAAX,EAAA,CAAAyC,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAA3C,EAAA,CAAAyC,iBAAA,CAAAG,EAAA,CAAAC,WAAA;IAAA;EAAA;;;YAAhBlC,gBAAgB;MAAAmC,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UAhIjBpD,EAJR,CAAAC,cAAA,aAA2C,aACW,aACV,aACR,YACsB;UAAAD,EAAA,CAAAE,MAAA,0HAAoB;UAAAF,EAAA,CAAAG,YAAA,EAAK;UAKvEH,EAHJ,CAAAC,cAAA,aAAuC,UAEhC,YACgD;UAAAD,EAAA,CAAAE,MAAA,mJAAyB;UAAAF,EAAA,CAAAG,YAAA,EAAK;UACjFH,EAAA,CAAAC,cAAA,eAAiF;UAAjDD,EAAA,CAAAsD,UAAA,sBAAAC,oDAAA;YAAA,OAAYF,GAAA,CAAAtB,eAAA,EAAiB;UAAA,EAAC;UAE1D/B,EADF,CAAAC,cAAA,WAAK,gBACoD;UAAAD,EAAA,CAAAE,MAAA,aAAK;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UACpEH,EAAA,CAAAI,SAAA,gBAKE;UACJJ,EAAA,CAAAG,YAAA,EAAM;UAGJH,EADF,CAAAC,cAAA,WAAK,gBACoD;UAAAD,EAAA,CAAAE,MAAA,+DAAU;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UACzEH,EAAA,CAAAI,SAAA,iBAIE;UACJJ,EAAA,CAAAG,YAAA,EAAM;UAGJH,EADF,CAAAC,cAAA,WAAK,gBACoD;UAAAD,EAAA,CAAAE,MAAA,mGAAgB;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAC/EH,EAAA,CAAAI,SAAA,iBAKE;;UACJJ,EAAA,CAAAG,YAAA,EAAM;UAENH,EAAA,CAAAC,cAAA,kBAIC;UAECD,EADA,CAAAwD,UAAA,KAAAC,iCAAA,mBAA0B,KAAAC,iCAAA,mBACyB;UAMzD1D,EAFI,CAAAG,YAAA,EAAS,EACJ,EACH;UAIJH,EADF,CAAAC,cAAA,WAAK,aACgD;UAAAD,EAAA,CAAAE,MAAA,eAAO;UAAAF,EAAA,CAAAG,YAAA,EAAK;UAG3DH,EAFJ,CAAAC,cAAA,eAA+C,eACE,gBACM;UAAAD,EAAA,CAAAE,MAAA,iEAAiB;UAAAF,EAAA,CAAAG,YAAA,EAAO;UAC3EH,EAAA,CAAAC,cAAA,gBAAkD;UAChDD,EAAA,CAAAE,MAAA,IACF;UACFF,EADE,CAAAG,YAAA,EAAO,EACH;UACNH,EAAA,CAAAC,cAAA,eAA2C;UACzCD,EAAA,CAAAE,MAAA,IACF;UACFF,EADE,CAAAG,YAAA,EAAM,EACF;UAGJH,EADF,CAAAC,cAAA,eAAmC,aACjB;UAAAD,EAAA,CAAAE,MAAA,+NAAkD;UAAAF,EAAA,CAAAG,YAAA,EAAI;UAEpEH,EADF,CAAAC,cAAA,cAA4C,UACtC;UAAAD,EAAA,CAAAE,MAAA,mDAAkB;UAAAF,EAAA,CAAAG,YAAA,EAAK;UAC3BH,EAAA,CAAAC,cAAA,UAAI;UAAAD,EAAA,CAAAE,MAAA,yEAA8B;UAAAF,EAAA,CAAAG,YAAA,EAAK;UACvCH,EAAA,CAAAC,cAAA,UAAI;UAAAD,EAAA,CAAAE,MAAA,6JAA4C;UAIxDF,EAJwD,CAAAG,YAAA,EAAK,EAClD,EACD,EACF,EACF;UAIJH,EADF,CAAAC,cAAA,eAAgD,aACK;UAAAD,EAAA,CAAAE,MAAA,4CAAW;UAAAF,EAAA,CAAAG,YAAA,EAAK;UACnEH,EAAA,CAAAC,cAAA,gBAA4E;UAA9CD,EAAA,CAAAsD,UAAA,sBAAAK,oDAAA;YAAA,OAAYN,GAAA,CAAAnB,aAAA,EAAe;UAAA,EAAC;UAGpDlC,EAFJ,CAAAC,cAAA,eAAuB,WAChB,gBACoD;UAAAD,EAAA,CAAAE,MAAA,4CAAW;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAC1EH,EAAA,CAAAI,SAAA,iBAKE;UACJJ,EAAA,CAAAG,YAAA,EAAM;UAGJH,EADF,CAAAC,cAAA,WAAK,gBACoD;UAAAD,EAAA,CAAAE,MAAA,uFAAc;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAC7EH,EAAA,CAAAI,SAAA,iBAKE;UACJJ,EAAA,CAAAG,YAAA,EAAM;UAENH,EAAA,CAAAC,cAAA,kBAIC;UAECD,EADA,CAAAwD,UAAA,KAAAI,iCAAA,mBAA+B,KAAAC,iCAAA,mBACyB;UAOhE7D,EAHM,CAAAG,YAAA,EAAS,EACL,EACD,EACH;UAGNH,EAAA,CAAAwD,UAAA,KAAAM,gCAAA,kBACqG;UAM7G9D,EAHM,CAAAG,YAAA,EAAM,EACF,EACF,EACF;;;UAtHYH,EAAA,CAAAQ,SAAA,IAAyB;UAAzBR,EAAA,CAAAK,UAAA,cAAAgD,GAAA,CAAAnC,WAAA,CAAyB;UAwBzBlB,EAAA,CAAAQ,SAAA,IAAmD;UAAnDR,EAAA,CAAAK,UAAA,UAAAL,EAAA,CAAA+D,WAAA,SAAAV,GAAA,CAAAtC,IAAA,kBAAAsC,GAAA,CAAAtC,IAAA,CAAAiD,SAAA,sBAAmD;UAQrDhE,EAAA,CAAAQ,SAAA,GAA8C;UAA9CR,EAAA,CAAAK,UAAA,aAAAgD,GAAA,CAAAnC,WAAA,CAAA+C,OAAA,IAAAZ,GAAA,CAAArC,UAAA,CAA8C;UAGvChB,EAAA,CAAAQ,SAAA,EAAiB;UAAjBR,EAAA,CAAAK,UAAA,UAAAgD,GAAA,CAAArC,UAAA,CAAiB;UACjBhB,EAAA,CAAAQ,SAAA,EAAgB;UAAhBR,EAAA,CAAAK,UAAA,SAAAgD,GAAA,CAAArC,UAAA,CAAgB;UAerBhB,EAAA,CAAAQ,SAAA,GACF;UADER,EAAA,CAAAS,kBAAA,OAAA4C,GAAA,CAAAtC,IAAA,kBAAAsC,GAAA,CAAAtC,IAAA,CAAAmD,OAAA,kBAAAb,GAAA,CAAAtC,IAAA,CAAAmD,OAAA,CAAAC,iBAAA,YACF;UAGAnE,EAAA,CAAAQ,SAAA,GACF;UADER,EAAA,CAAAS,kBAAA,kFAAA4C,GAAA,CAAAtC,IAAA,kBAAAsC,GAAA,CAAAtC,IAAA,CAAAmD,OAAA,kBAAAb,GAAA,CAAAtC,IAAA,CAAAmD,OAAA,CAAAE,aAAA,YACF;UAiBEpE,EAAA,CAAAQ,SAAA,IAAuB;UAAvBR,EAAA,CAAAK,UAAA,cAAAgD,GAAA,CAAA7B,SAAA,CAAuB;UAwBvBxB,EAAA,CAAAQ,SAAA,IAAiD;UAAjDR,EAAA,CAAAK,UAAA,aAAAgD,GAAA,CAAA7B,SAAA,CAAAyC,OAAA,IAAAZ,GAAA,CAAApC,eAAA,CAAiD;UAG1CjB,EAAA,CAAAQ,SAAA,EAAsB;UAAtBR,EAAA,CAAAK,UAAA,UAAAgD,GAAA,CAAApC,eAAA,CAAsB;UACtBjB,EAAA,CAAAQ,SAAA,EAAqB;UAArBR,EAAA,CAAAK,UAAA,SAAAgD,GAAA,CAAApC,eAAA,CAAqB;UAU9BjB,EAAA,CAAAQ,SAAA,EAAa;UAAbR,EAAA,CAAAK,UAAA,SAAAgD,GAAA,CAAA3C,OAAA,CAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}