{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../components/loading-spinner/loading-spinner.component\";\nfunction LoginComponent_div_21_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u0435\\u043D \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_21_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" \\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 email \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, LoginComponent_div_21_div_1_Template, 2, 0, \"div\", 18)(2, LoginComponent_div_21_div_2_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    let tmp_2_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.loginForm.get(\"email\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r0.loginForm.get(\"email\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"email\"]);\n  }\n}\nfunction LoginComponent_div_26_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" \\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u0435\\u043D \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_26_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" \\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C \\u043C\\u0438\\u043D\\u0438\\u043C\\u0443\\u043C 6 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, LoginComponent_div_26_div_1_Template, 2, 0, \"div\", 18)(2, LoginComponent_div_26_div_2_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    let tmp_2_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.loginForm.get(\"password\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r0.loginForm.get(\"password\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction LoginComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵelement(1, \"app-loading-spinner\");\n    i0.ɵɵelementStart(2, \"span\", 23);\n    i0.ɵɵtext(3, \"\\u0412\\u0445\\u043E\\u0434...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(fb, authService, router) {\n      this.fb = fb;\n      this.authService = authService;\n      this.router = router;\n      this.isLoading = false;\n      this.error = '';\n      this.loginForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.minLength(6)]]\n      });\n    }\n    loginWithTelegram() {\n      // Открываем Telegram Login Widget в новом окне\n      const telegramUrl = 'https://oauth.telegram.org/auth?bot_id=7427373200&origin=http://localhost:4200&return_to=http://localhost:3000/api/auth/telegram';\n      window.open(telegramUrl, 'telegram-login', 'width=400,height=500');\n    }\n    onSubmit() {\n      if (this.loginForm.valid) {\n        this.isLoading = true;\n        this.error = '';\n        this.authService.login(this.loginForm.value).subscribe({\n          next: () => {\n            this.router.navigate(['/']);\n          },\n          error: error => {\n            this.isLoading = false;\n            this.error = 'Неверный email или пароль';\n            console.error('Login error:', error);\n          }\n        });\n      }\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(t) {\n        return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        decls: 32,\n        vars: 7,\n        consts: [[1, \"min-h-screen\", \"flex\", \"items-center\", \"justify-center\", \"bg-gray-50\", \"py-12\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [1, \"max-w-md\", \"w-full\", \"space-y-8\"], [1, \"mt-6\", \"text-center\", \"text-3xl\", \"font-extrabold\", \"text-gray-900\"], [1, \"mt-2\", \"text-center\", \"text-sm\", \"text-gray-600\"], [\"routerLink\", \"/register\", 1, \"font-medium\", \"text-primary-600\", \"hover:text-primary-500\"], [1, \"mt-4\", \"text-center\"], [1, \"btn\", \"btn-outline\", \"flex\", \"items-center\", \"space-x-2\", \"mx-auto\", 3, \"click\"], [\"viewBox\", \"0 0 24 24\", \"fill\", \"currentColor\", 1, \"w-4\", \"h-4\"], [\"d\", \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.568 8.16l-1.61 7.59c-.12.56-.44.7-.9.44l-2.49-1.84-1.2 1.15c-.13.13-.24.24-.49.24l.18-2.56 4.64-4.19c.2-.18-.04-.28-.31-.1l-5.74 3.61-2.47-.77c-.54-.17-.55-.54.11-.8l9.7-3.74c.45-.17.85.1.7.8z\"], [1, \"mt-8\", \"space-y-6\", 3, \"ngSubmit\", \"formGroup\"], [1, \"space-y-4\"], [\"for\", \"email\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"email\", \"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"your@email.com\", 1, \"mt-1\", \"input-field\"], [\"class\", \"mt-1 text-sm text-red-600\", 4, \"ngIf\"], [\"for\", \"password\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"password\", \"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"\\u0412\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\", 1, \"mt-1\", \"input-field\"], [\"class\", \"text-center text-red-600 text-sm\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"w-full\", \"btn-primary\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"flex items-center justify-center\", 4, \"ngIf\"], [1, \"mt-1\", \"text-sm\", \"text-red-600\"], [1, \"text-center\", \"text-red-600\", \"text-sm\"], [1, \"flex\", \"items-center\", \"justify-center\"], [1, \"ml-2\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h2\", 2);\n            i0.ɵɵtext(4, \" \\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442 \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"p\", 3);\n            i0.ɵɵtext(6, \" \\u0418\\u043B\\u0438 \");\n            i0.ɵɵelementStart(7, \"a\", 4);\n            i0.ɵɵtext(8, \" \\u0441\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442 \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 5)(10, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_10_listener() {\n              return ctx.loginWithTelegram();\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(11, \"svg\", 7);\n            i0.ɵɵelement(12, \"path\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(13, \"span\");\n            i0.ɵɵtext(14, \"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(15, \"form\", 9);\n            i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_15_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(16, \"div\", 10)(17, \"div\")(18, \"label\", 11);\n            i0.ɵɵtext(19, \" Email \\u0430\\u0434\\u0440\\u0435\\u0441 \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(20, \"input\", 12);\n            i0.ɵɵtemplate(21, LoginComponent_div_21_Template, 3, 2, \"div\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\")(23, \"label\", 14);\n            i0.ɵɵtext(24, \" \\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(25, \"input\", 15);\n            i0.ɵɵtemplate(26, LoginComponent_div_26_Template, 3, 2, \"div\", 13);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(27, LoginComponent_div_27_Template, 2, 1, \"div\", 16);\n            i0.ɵɵelementStart(28, \"div\")(29, \"button\", 17);\n            i0.ɵɵtemplate(30, LoginComponent_span_30_Template, 2, 0, \"span\", 18)(31, LoginComponent_span_31_Template, 4, 0, \"span\", 19);\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            let tmp_1_0;\n            let tmp_2_0;\n            i0.ɵɵadvance(15);\n            i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.loginForm.get(\"email\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.loginForm.get(\"email\")) == null ? null : tmp_1_0.touched));\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.loginForm.get(\"password\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx.loginForm.get(\"password\")) == null ? null : tmp_2_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid || ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          }\n        },\n        dependencies: [i4.NgIf, i3.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i5.LoadingSpinnerComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}