{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction NavbarComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 9);\n    i0.ɵɵtext(2, \" \\u0412\\u043E\\u0439\\u0442\\u0438 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 10);\n    i0.ɵɵtext(4, \" \\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction NavbarComponent_ng_template_9_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" Credits: \", ctx_r1.currentUser.credits && ctx_r1.currentUser.credits.credits_remaining || 0, \"/\", ctx_r1.currentUser.credits && ctx_r1.currentUser.credits.credits_total || 0, \" \");\n  }\n}\nfunction NavbarComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"span\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, NavbarComponent_ng_template_9_span_3_Template, 2, 2, \"span\", 12);\n    i0.ɵɵelementStart(4, \"a\", 13);\n    i0.ɵɵtext(5, \" \\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"a\", 14);\n    i0.ɵɵtext(7, \" \\u0410\\u0434\\u043C\\u0438\\u043D \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function NavbarComponent_ng_template_9_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵtext(9, \" \\u0412\\u044B\\u0439\\u0442\\u0438 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", (ctx_r1.currentUser == null ? null : ctx_r1.currentUser.fullName) || (ctx_r1.currentUser == null ? null : ctx_r1.currentUser.email), \"! \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentUser == null ? null : ctx_r1.currentUser.credits);\n  }\n}\nexport class NavbarComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.currentUser = null;\n    this.isAuthenticated = false;\n  }\n  ngOnInit() {\n    this.authService.currentUser$.subscribe(user => {\n      this.currentUser = user;\n      this.isAuthenticated = !!user;\n    });\n  }\n  logout() {\n    this.authService.logout().subscribe({\n      next: () => {\n        this.router.navigate(['/']);\n      },\n      error: error => {\n        console.error('Ошибка выхода:', error);\n        // Всё равно перенаправляем на главную\n        this.router.navigate(['/']);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function NavbarComponent_Factory(t) {\n      return new (t || NavbarComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: NavbarComponent,\n      selectors: [[\"app-navbar\"]],\n      decls: 11,\n      vars: 2,\n      consts: [[\"authenticatedMenu\", \"\"], [1, \"bg-white\", \"shadow-sm\", \"border-b\", \"border-gray-200\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [1, \"flex\", \"justify-between\", \"h-16\"], [1, \"flex\", \"items-center\"], [\"routerLink\", \"/\", 1, \"flex-shrink-0\", \"flex\", \"items-center\"], [1, \"text-xl\", \"font-bold\", \"text-primary-600\"], [1, \"flex\", \"items-center\", \"space-x-4\"], [4, \"ngIf\", \"ngIfElse\"], [\"routerLink\", \"/login\", 1, \"text-gray-700\", \"hover:text-primary-600\", \"px-3\", \"py-2\", \"rounded-md\", \"text-sm\", \"font-medium\"], [\"routerLink\", \"/register\", 1, \"btn-primary\"], [1, \"text-sm\", \"text-gray-700\"], [\"class\", \"text-sm text-primary-600 font-medium\", 4, \"ngIf\"], [\"routerLink\", \"/profile\", 1, \"text-gray-700\", \"hover:text-primary-600\", \"px-3\", \"py-2\", \"rounded-md\", \"text-sm\", \"font-medium\"], [\"routerLink\", \"/admin\", 1, \"text-gray-700\", \"hover:text-primary-600\", \"px-3\", \"py-2\", \"rounded-md\", \"text-sm\", \"font-medium\"], [1, \"text-gray-700\", \"hover:text-primary-600\", \"px-3\", \"py-2\", \"rounded-md\", \"text-sm\", \"font-medium\", 3, \"click\"], [1, \"text-sm\", \"text-primary-600\", \"font-medium\"]],\n      template: function NavbarComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"div\", 4)(4, \"a\", 5)(5, \"h1\", 6);\n          i0.ɵɵtext(6, \"CarFax Web\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 7);\n          i0.ɵɵtemplate(8, NavbarComponent_ng_container_8_Template, 5, 0, \"ng-container\", 8)(9, NavbarComponent_ng_template_9_Template, 10, 2, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          const authenticatedMenu_r3 = i0.ɵɵreference(10);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated)(\"ngIfElse\", authenticatedMenu_r3);\n        }\n      },\n      dependencies: [i3.NgIf, i2.RouterLink],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementContainerStart","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","ctx_r1","currentUser","credits","credits_remaining","credits_total","ɵɵtemplate","NavbarComponent_ng_template_9_span_3_Template","ɵɵlistener","NavbarComponent_ng_template_9_Template_button_click_8_listener","ɵɵrestoreView","_r1","ɵɵnextContext","ɵɵresetView","logout","ɵɵtextInterpolate1","fullName","email","ɵɵproperty","NavbarComponent","constructor","authService","router","isAuthenticated","ngOnInit","currentUser$","subscribe","user","next","navigate","error","console","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","decls","vars","consts","template","NavbarComponent_Template","rf","ctx","NavbarComponent_ng_container_8_Template","NavbarComponent_ng_template_9_Template","ɵɵtemplateRefExtractor","authenticatedMenu_r3"],"sources":["/Users/test/Documents/Apps/CarFax Web/frontend/src/app/components/navbar/navbar.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService, User } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-navbar',\n  template: `\n    <nav class=\"bg-white shadow-sm border-b border-gray-200\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between h-16\">\n          <div class=\"flex items-center\">\n            <a routerLink=\"/\" class=\"flex-shrink-0 flex items-center\">\n              <h1 class=\"text-xl font-bold text-primary-600\">CarFax Web</h1>\n            </a>\n          </div>\n          \n          <div class=\"flex items-center space-x-4\">\n            <ng-container *ngIf=\"!isAuthenticated; else authenticatedMenu\">\n              <a routerLink=\"/login\" class=\"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium\">\n                Войти\n              </a>\n              <a routerLink=\"/register\" class=\"btn-primary\">\n                Регистрация\n              </a>\n            </ng-container>\n            \n            <ng-template #authenticatedMenu>\n              <div class=\"flex items-center space-x-4\">\n                <span class=\"text-sm text-gray-700\">\n                  Привет, {{ currentUser?.fullName || currentUser?.email }}!\n                </span>\n                <span *ngIf=\"currentUser?.credits\" class=\"text-sm text-primary-600 font-medium\">\n                  Credits: {{ (currentUser.credits && currentUser.credits.credits_remaining) || 0 }}/{{ (currentUser.credits && currentUser.credits.credits_total) || 0 }}\n                </span>\n                <a routerLink=\"/profile\" class=\"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium\">\n                  Профиль\n                </a>\n                <a routerLink=\"/admin\" class=\"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium\">\n                  Админ\n                </a>\n                <button (click)=\"logout()\" class=\"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium\">\n                  Выйти\n                </button>\n              </div>\n            </ng-template>\n          </div>\n        </div>\n      </div>\n    </nav>\n  `,\n  styles: []\n})\nexport class NavbarComponent implements OnInit {\n  currentUser: User | null = null;\n  isAuthenticated = false;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.authService.currentUser$.subscribe(user => {\n      this.currentUser = user;\n      this.isAuthenticated = !!user;\n    });\n  }\n\n  logout(): void {\n    this.authService.logout().subscribe({\n      next: () => {\n        this.router.navigate(['/']);\n      },\n      error: (error) => {\n        console.error('Ошибка выхода:', error);\n        // Всё равно перенаправляем на главную\n        this.router.navigate(['/']);\n      }\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}