# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç CarFax Web

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- npm –∏–ª–∏ yarn
- Supabase CLI
- Git

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd carfax-web

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
npm run install:all
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Supabase CLI
npm install -g supabase

# –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç Supabase
supabase login

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
supabase init

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
supabase start
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Backend
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞
cp backend/env.example backend/.env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
# –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏ –∏–∑: supabase status
```

#### Frontend
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –≤ frontend –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
echo "VITE_SUPABASE_URL=http://localhost:54321" > frontend/.env
echo "VITE_SUPABASE_ANON_KEY=your_anon_key_here" >> frontend/.env
echo "VITE_API_URL=http://localhost:3000/api/v1" >> frontend/.env
```

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
supabase db push
```

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
npm run dev

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ:
# Backend (–ø–æ—Ä—Ç 3000)
npm run dev:backend

# Frontend (–ø–æ—Ä—Ç 4200)
npm run dev:frontend
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ Docker
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: PDF Worker

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ worker –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF
cd worker
npm install
npm run dev
```

## –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

- **Frontend**: http://localhost:4200
- **Backend API**: http://localhost:3000
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:3000/api
- **Supabase Dashboard**: http://localhost:54323

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Ç–µ—Å—Ç—ã
npm run test

# –¢–µ—Å—Ç—ã backend
npm run test:backend

# –¢–µ—Å—Ç—ã frontend
npm run test:frontend
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev                  # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
npm run dev:frontend         # –¢–æ–ª—å–∫–æ frontend
npm run dev:backend          # –¢–æ–ª—å–∫–æ backend

# –°–±–æ—Ä–∫–∞
npm run build                # –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
npm run build:frontend       # –°–±–æ—Ä–∫–∞ frontend
npm run build:backend        # –°–±–æ—Ä–∫–∞ backend

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run test                 # –í—Å–µ —Ç–µ—Å—Ç—ã
npm run test:frontend        # Frontend —Ç–µ—Å—Ç—ã
npm run test:backend         # Backend —Ç–µ—Å—Ç—ã

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
supabase start               # –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
supabase db push             # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
supabase db reset            # –°–±—Ä–æ—Å –ë–î
supabase stop                # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–î
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
carfax-web/
‚îú‚îÄ‚îÄ frontend/                 # Angular –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/       # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/           # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/        # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ guards/          # Route guards
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ backend/                  # NestJS API
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modules/         # –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/          # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.ts
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ worker/                   # PDF Worker
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pdf-generator.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ supabase/                 # Supabase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ migrations/          # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ config.toml
‚îî‚îÄ‚îÄ docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ ARCHITECTURE.md
    ‚îú‚îÄ‚îÄ API_SPEC.md
    ‚îî‚îÄ‚îÄ DEPLOY.md
```

## –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç** —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ
2. **–û—Ç–∫—Ä–æ–π—Ç–µ** http://localhost:4200 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å** –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
4. **–í–≤–µ–¥–∏—Ç–µ VIN** –∞–≤—Ç–æ–º–æ–±–∏–ª—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á—ë—Ç–∞
5. **–û–ø–ª–∞—Ç–∏—Ç–µ** –æ—Ç—á—ë—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bulk –ø–∞–∫–µ—Ç

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å Supabase

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
supabase status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
supabase stop && supabase start

# –°–±—Ä–æ—Å—å—Ç–µ –ë–î
supabase db reset
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
npm cache clean --force

# –£–¥–∞–ª–∏—Ç–µ node_modules –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
rm -rf node_modules package-lock.json
npm install
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
lsof -i :3000
lsof -i :4200
lsof -i :54321

# –£–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
kill -9 <PID>
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

- üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–º. –ø–∞–ø–∫—É `docs/`
- üêõ **–ü—Ä–æ–±–ª–µ–º—ã**: –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- üí¨ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

1. –ò–∑—É—á–∏—Ç–µ [–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã](docs/ARCHITECTURE.md)
2. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](docs/API_SPEC.md)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ [—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](docs/DEPLOY.md)
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [—Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á](docs/TODO.md)

–£–¥–∞—á–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üéâ
